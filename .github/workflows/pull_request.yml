name: PR Compose Build

on:
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]

jobs:
  compose-build:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Prepare .env for worker
        run: |
          cat <<'EOF' > .env
          AIRTHINGS_CLIENT_ID=dummy-client-id
          AIRTHINGS_CLIENT_SECRET=dummy-client-secret
          WEATHER_ZIP_CODE=00000
          EOF

      - name: Build Docker Compose services
        run: docker compose -f docker-compose.yml build --pull
